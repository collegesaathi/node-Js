generator client {
  provider = "prisma-client-js"
}
datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}
model Role {
  id         Int       @id @default(autoincrement())
  name       String    @unique
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  deleted_at DateTime?
  users      User[]
}

model User {
  id                Int                @id @default(autoincrement())
  role_id           Int
  email             String             @unique
  full_name         String
  password          String
  profile_image     String?
  created_at        DateTime           @default(now())
  updated_at        DateTime           @updatedAt
  deleted_at        DateTime?
  blacklistedTokens BlacklistedToken[]
  role              Role               @relation(fields: [role_id], references: [id])
}

model University {
  id                 Int                          @id @default(autoincrement())
  slug               String                       @unique
  name               String
  pdf_download       String?
  rank               String?
  icon               String?
  fees_desc          String?
  video              String?
  cover_image        String?
  icon_alt               String?
  cover_image_alt         String?
  position           Int?                         @default(0)
  description        Json?
  created_at         DateTime                     @default(now())
  updated_at         DateTime                     @updatedAt
  deleted_at         DateTime?
  blogs               Blog[]
  courses   Course[]   // ✅ one university → many courses
  specialisation      Specialisation[]   
  leads              leads[]
  about              About?
  admissionProcess   AdmissionProcess?
  advantages         Advantages?
  approvals          Approvals_Management?
  universityCampuses UniversityCampus?
  certificates       Certificates?
  examPatterns       ExamPatterns?
  facts              Facts?
  faq                Faq?
  financialAid       FinancialAid?
  partners           Partners?
  rankings           Rankings?
  services           Services?
  seo                Seo?
}


model Course {
  id           Int                 @id @default(autoincrement())
  category_id  Int
  slug         String              @unique
  name         String
  icon         String?
  video         String?
  cover_image        String?
  position           Int?                         @default(0)
  cover_image_alt         String?
  icon_alt              String?
  created_at   DateTime            @default(now())
  updated_at   DateTime            @updatedAt
  deleted_at   DateTime?
  category     Category            @relation(fields: [category_id], references: [id])
  description        Json?
  specialisation      Specialisation[]
  leads           leads[]
  about              About?
  fees              Fees?
  approvals      Approvals_Management? 
  rankings           Rankings? 
  eligibilitycriteria  EligibilityCriteria?
  curriculum          Curriculum?
  certificates       Certificates?
  skills             Skills?
  examPatterns       ExamPatterns?
  financialAid       FinancialAid?
  career       Career?
  partners           Partners?
  services           Services?
  admissionprocess   AdmissionProcess?
  faq                Faq?
   advantages        Advantages?
  seo                Seo?
  facts              Facts?  
  university_id       Int?        // ❗ NOT UNIQUE
   university    University? @relation(fields: [university_id], references: [id])
}


model Specialisation {
  id            Int       @id @default(autoincrement())
  university_id      Int?   
  course_id Int
  slug          String    @unique
  name          String
  icon          String?
  video          String?
  cover_image   String?
  icon_alt      String?
  cover_image_alt String?
    description        Json?
  position      Int?      @default(0)
  created_at    DateTime  @default(now())
  updated_at    DateTime  @updatedAt
  deleted_at    DateTime?
  // Relations
  university     University? @relation(fields: [university_id], references: [id])
  course        Course    @relation(fields: [course_id], references: [id])
  about         About?
  fees          Fees?
  approvals     Approvals_Management?
  rankings      Rankings?
  eligibilitycriteria EligibilityCriteria?
  curriculum    Curriculum?
  certificates  Certificates?
  skills        Skills?
  examPatterns  ExamPatterns?
  financialAid  FinancialAid?
  career        Career?
  partners      Partners?
  services      Services?
  admissionprocess AdmissionProcess?
  faq           Faq?
  seo           Seo?
  advantages    Advantages?
  leads         leads[]
  facts              Facts?
}

model Fees {
  id  Int @id @default(autoincrement())
  annual_fees  String?
  semester_wise_fees String? 
  tuition_fees String?
  course_id  Int?   @unique
  specialisation_id  Int?   @unique
  fees_title String?
  fees_desc  String?
  course     Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}


model About {
  id            Int        @id @default(autoincrement())
  university_id Int?       @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  university    University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}


model Approvals_Management {
  id            Int        @id @default(autoincrement())
  university_id Int?       @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  approval_ids  Json?
  university    University? @relation(fields: [university_id], references: [id])
  course        Course?     @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Approvals {
  id         Int       @id @default(autoincrement())
  title      String
  image      String?
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  deleted_at DateTime?
}


model Rankings {
  id            Int        @id @default(autoincrement())
  university_id Int?       @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  university    University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Certificates {
  id            Int        @id @default(autoincrement())
  university_id Int?        @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  image         String?
  image_alt     String?
  university    University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}


model ExamPatterns {
  id            Int        @id @default(autoincrement())
  university_id Int?  @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  bottompatterndesc   String?
  patterns         Json?
  university    University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])

}

model FinancialAid {
  id            Int        @id @default(autoincrement())
  university_id Int?  @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  aid           Json?
  university University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Partners {
  id                   Int        @id @default(autoincrement())
  university_id Int?  @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  placement_partner_id Json?
  title                String
  description          String?
  university University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Services {
  id            Int        @id @default(autoincrement())
  university_id Int?  @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  services      Json?
  university University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Faq {
  id            Int        @id @default(autoincrement())
  university_id Int?  @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  program_id Int?      @unique
  faqs          Json?
  university University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
  program Program?  @relation(fields: [program_id], references: [id])
}

model  AdmissionProcess {
  id            Int        @id @default(autoincrement())
  university_id Int?  @unique
  course_id     Int?       @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  process       Json?
  university     University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Skills {
  id            Int        @id @default(autoincrement())
  course_id Int? @unique
  specialisation_id Int?      @unique
  title         String
  description   String?
  skills    Json?
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Advantages {
  id                Int       @id @default(autoincrement())
  university_id     Int?      @unique
  course_id         Int?      @unique
  specialisation_id Int?      @unique
  title             String
  description       String?
  advantages        Json?
  university        University? @relation(fields: [university_id], references: [id])
  course            Course?     @relation(fields: [course_id], references: [id])
  specialisation    Specialisation? @relation(fields: [specialisation_id], references: [id])
}

model Facts {
  id            Int        @id @default(autoincrement())
  university_id Int? @unique
  course_id Int? @unique
  specialisation_id Int?      @unique
  title         String
  facts         Json?
  university    University? @relation(fields: [university_id], references: [id])
  course        Course?  @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model UniversityCampus {
  id            Int        @id @default(autoincrement())
  university_id Int    @unique
  campus         Json?
  campusInternationList  Json?
  university    University @relation(fields: [university_id], references: [id])
}


model Category {
  id          Int       @id @default(autoincrement())
  name        String
  short_title String?
  icon        String?
  created_at  DateTime  @default(now())
  updated_at  DateTime  @updatedAt
  deleted_at  DateTime?
  courses     Course[]
  programs    Program[] 
}

model BlogTag {
  id         Int       @id @default(autoincrement())
  name       String
  icon       String?
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  deleted_at DateTime?
  tags       Tags[]
}

model Blog {
  id            Int         @id @default(autoincrement())
  university_id Int?
  title         String
  slug          String      @unique
  image         String?
  description   String?
  author        String?
  is_featured   Boolean     @default(false)
  is_pinned     Boolean     @default(false)
  is_trending   Boolean     @default(false)
  views         Int         @default(0)
  likes         Int         @default(0)
  dislikes      Int         @default(0)
  comments      Int         @default(0)
  created_at    DateTime    @default(now())
  updated_at    DateTime    @updatedAt
  deleted_at    DateTime?
  university    University? @relation(fields: [university_id], references: [id])
  tags          Tags[]
  seo                Seo?
}

model Tags {
  id         Int       @id @default(autoincrement())
  blog_id    Int
  tag_id     Int
  created_at DateTime  @default(now())
  deleted_at DateTime? @db.Timestamp(6)
  blog       Blog      @relation(fields: [blog_id], references: [id], onDelete: Cascade)
  blogTag    BlogTag   @relation(fields: [tag_id], references: [id], onDelete: Cascade)

  @@map("tags")
}

model BlacklistedToken {
  id         Int      @id @default(autoincrement())
  token      String   @unique
  user_id    Int?
  created_at DateTime @default(now())
  user       User?    @relation(fields: [user_id], references: [id])
}


model Placements {
  id                 Int                  @id @default(autoincrement())
  title              String
  image              String?
  created_at         DateTime             @default(now())
  updated_at         DateTime             @updatedAt
  deleted_at         DateTime?
}

model leads {
  id            Int         @id @default(autoincrement())
  university_id Int?
  name          String
  phone_number  String?
  email         String?
  course_id     Int?
  specialisation_id Int?
  state         String?
  city          String?
  content       String?
  page_name     String?     
  proInsights   Json?   
  utm_source   String?
  utm_medium   String?
  utm_campaign   String?
  utm_content   String?
  utm_term   String?
  type         String?
  device_type String?
  ip_address   String?
  created_at    DateTime    @default(now())
  updated_at    DateTime    @updatedAt
  deleted_at    DateTime?
  course        Course?     @relation(fields: [course_id], references: [id])
  university    University? @relation(fields: [university_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Seo {
  id            Int        @id @default(autoincrement())
  university_id Int? @unique
  course_id     Int? @unique
  program_id    Int? @unique
  blog_id       Int? @unique
  specialisation_id  Int? @unique
  meta_title       String?
  meta_description String?
  meta_keywords    String?
  canonical_url    String?
  json_ld          Json?
  created_at    DateTime   @default(now())
  updated_at    DateTime   @updatedAt
  deleted_at    DateTime?
  // Relations
  university    University? @relation(fields: [university_id], references: [id])
  course        Course?     @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
  program     Program? @relation(fields: [program_id], references: [id])
  blog          Blog?       @relation(fields: [blog_id], references: [id])
}

model Career {
  id            Int        @id @default(autoincrement())
  course_id      Int? @unique
   specialisation_id      Int? @unique
  title         String
  description   String?
  Career    Json?
  course    Course? @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])

}


model Curriculum {
  id            Int        @id @default(autoincrement())
  course_id      Int? @unique
  specialisation_id Int? @unique
  title         String
  description   String?
  semesters     Json?
  course    Course? @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model  EligibilityCriteria{
    id            Int        @id @default(autoincrement())
  course_id      Int? @unique
  specialisation_id Int? @unique
  title         String
  description   String?
  IndianCriteria Json?
  NRICriteria Json?
  course    Course? @relation(fields: [course_id], references: [id])
  specialisation   Specialisation?  @relation(fields: [specialisation_id], references: [id])
}

model Program {
  id                  Int        @id @default(autoincrement())
  title               String
  description         String
  bannerImage         String?
  slug                String    @unique
  bannerImageAlt      String?
  pdfdownlaod         String?
  career_growth       String?
  duration            String?
  specialization      String?
  audio               String?
  subtitle            String?
  shortDescription    String?
  video               String?
  universitytitle     String?
  universitydesc      String?
  universitybtmdesc   String?
  university_id       Json?
  conclusion          String?
  specialisationtitle String?
  specialisationdesc  String?
  // ✅ CATEGORY RELATION
  category_id         Int        @default(1)
  category            Category   @relation(fields: [category_id], references: [id])
  careers             ProgramCareer?
  placement           ProgramPlacement?
  choose                ProgramChoose?
  academic            ProgramAcademic?
  graph          ProgramGraph?
  highlights          ProgramHighlights?
  entrance            ProgramEntrance?
  faqs                Faq?
  seo                 Seo?
  institutes          ProgramInstitutes?
  curriculum          ProgramCurriculum?
  experience          ProgramExperience?
  financial           ProgramFinancialScholarship?
  durationfees            ProgramDurationFees?
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt
  deleted_at          DateTime?  
}

model ProgramAcademic {
  id            Int        @id @default(autoincrement())
  title       String
  description String?
 Image        String?
 image_alt    String?
 entra_title String?
 entra_desc  String?
 entra_image String?
 entra_image_alt String?
 program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramCareer {
  id            Int        @id @default(autoincrement())
  title       String
  description String?
  career      Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}


model ProgramFinancialScholarship {
  id            Int        @id @default(autoincrement())
  title       String
  description String?
  financial      Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramDurationFees {
  id            Int        @id @default(autoincrement())
  title       String
  description String?
  duration      Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramGraph {
 id            Int        @id @default(autoincrement())
  title       String
  description String?
  subdesc    String?
  monthly      Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramHighlights {
 id            Int        @id @default(autoincrement())
  title       String
  description String?
  subtitle    String?
  Highlights      Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramEntrance{
 id            Int        @id @default(autoincrement())
  icon        String?
  title       String
  description String?
  Entrance      Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramInstitutes{
   id            Int        @id @default(autoincrement())
  icon        String?
  title       String
  description String?
  Institutes      Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramPlacement {
  id            Int        @id @default(autoincrement())
  title       String
  description String?
  placement_ids  Json?
  subtitle String?
  Subdec   String?
  subplacement  Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramCurriculum {
  id            Int        @id @default(autoincrement())
  title       String
  description String?
  subtitle   String?
  curriculum_id  Json?
  program_id  Int?  @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramChoose {
 id            Int        @id @default(autoincrement())
  title       String
  description String?
  descbtm     String?
  choose        Json?
  purpuse        Json?
  program_id  Int? @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model ProgramExperience {
 id            Int        @id @default(autoincrement())
  title       String
  description String?
  notes     String?
  experiences        Json?
  program_id  Int? @unique
  program     Program? @relation(fields: [program_id], references: [id])
}

model homePageVideo {
  id                  Int      @id @default(autoincrement())
  title               String?
  coverimage          String?
  videoUrl            String?
  description         String?
  created_at          DateTime @default(now())
  updated_at          DateTime @updatedAt
  deleted_at          DateTime?
}
